// .devcontainer/devcontainer.json
{
    "image": "mcr.microsoft.com/devcontainers/base:ubuntu",
    
    "features": {
        "ghcr.io/devcontainers/features/docker-in-docker:2": {
            "version": "latest",
            "moby": true
        }
    },
    
    // This command installs JRE and Nextflow
    "postCreateCommand": "sudo apt-get update && sudo apt-get install -y default-jre && curl -s https://get.nextflow.io | bash && sudo mv nextflow /usr/local/bin/",
    
    "remoteEnv": {
        "PATH": "${containerEnv:PATH}:/usr/local/bin"
    },
    
    // This sets the Nextflow profile to use Docker (required for Cecret's containers)
    "containerEnv": {
        "NXF_DEFAULT_LAUNCHER": "docker"
    },
    
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-vscode.live-server",
                "redhat.vscode-yaml",
                "humao.rest-client"
            ]
        }
    }
}
